{"ast":null,"code":"function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport { Controller } from \"stimulus\";\n\nvar _default = /*#__PURE__*/function (_Controller) {\n  _inherits(_default, _Controller);\n\n  var _super = _createSuper(_default);\n\n  function _default() {\n    _classCallCheck(this, _default);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(_default, [{\n    key: \"connect\",\n    value: function connect() {\n      if (this.formElementsOnPage() && this.devEnvironment()) {\n        this.addComponent();\n      }\n    }\n  }, {\n    key: \"addComponent\",\n    value: function addComponent() {\n      this.element.insertAdjacentHTML('beforeend', this.buttonTag());\n    }\n  }, {\n    key: \"analysePage\",\n    value: function analysePage() {\n      if (this.formElementsOnPage() == 1) {\n        this.fillForm();\n      } else {\n        this.buttonTarget.text = 'Too many forms on this page…';\n      }\n    }\n  }, {\n    key: \"analysePageWithKeybinding\",\n    value: function analysePageWithKeybinding(e) {\n      if (e.key === 'f') {\n        this.analysePage();\n      }\n    }\n  }, {\n    key: \"buttonTag\",\n    value: function buttonTag() {\n      return \"\\n      <button\\n        class=\\\"fixed bottom-0 right-0 mb-4 mr-4 p-2 bg-gray-900 text-gray-100 rounded shadow-lg\\\"\\n        data-target=\\\"sjabloon--fill-form.button\\\"\\n        data-action=\\\"click->sjabloon--fill-form#analysePage keydown@window->sjabloon--fill-form#analysePageWithKeybinding\\\"\\n        >\\n        Fill form\\n      </button>\\n    \";\n    }\n  }, {\n    key: \"fillForm\",\n    value: function fillForm() {\n      var _this = this;\n\n      var forms = document.getElementsByTagName('form');\n      [].forEach.call(forms, function (form) {\n        var inputs = form.getElementsByTagName('input');\n\n        _this.fillInputsFor(form);\n      });\n    }\n  }, {\n    key: \"fillInputsFor\",\n    value: function fillInputsFor(form) {\n      var _this2 = this;\n\n      var inputs = form.getElementsByTagName('input');\n      [].forEach.call(inputs, function (input) {\n        var regex = /(^.*\\[|\\].*$)/g;\n        var inputName = input.name.replace(regex, '');\n\n        switch (inputName) {\n          case 'name':\n            input.value = _this2.randomiseValue(_this2.nameValueOptions());\n            break;\n\n          case 'email':\n            input.value = _this2.randomiseValue(_this2.emailValueOptions());\n            break;\n\n          case 'password':\n            input.value = _this2.randomiseValue(_this2.passwordValueOptions());\n            break;\n        }\n      });\n    }\n  }, {\n    key: \"nameValueOptions\",\n    value: function nameValueOptions() {\n      return ['Eelco', 'Kate', 'Cameron'];\n    }\n  }, {\n    key: \"emailValueOptions\",\n    value: function emailValueOptions() {\n      return ['test@example.com'];\n    }\n  }, {\n    key: \"passwordValueOptions\",\n    value: function passwordValueOptions() {\n      return ['1234'];\n    }\n  }, {\n    key: \"randomiseValue\",\n    value: function randomiseValue(items) {\n      return items[Math.floor(Math.random() * items.length)];\n    }\n  }, {\n    key: \"formElementsOnPage\",\n    value: function formElementsOnPage() {\n      return this.numberOfFormElements() > 0;\n    }\n  }, {\n    key: \"numberOfFormElements\",\n    value: function numberOfFormElements() {\n      return document.getElementsByTagName('form').length;\n    }\n  }, {\n    key: \"devEnvironment\",\n    value: function devEnvironment() {\n      return process.env.RAILS_ENV === 'development';\n    }\n  }]);\n\n  return _default;\n}(Controller);\n\n_default.targets = [\"button\"];\nexport { _default as default };","map":{"version":3,"sources":["/home/good-dev/Documents/Work/heytasker4/frontend/controllers/sjabloon/fill_form_controller.js"],"names":["Controller","formElementsOnPage","devEnvironment","addComponent","element","insertAdjacentHTML","buttonTag","fillForm","buttonTarget","text","e","key","analysePage","forms","document","getElementsByTagName","forEach","call","form","inputs","fillInputsFor","input","regex","inputName","name","replace","value","randomiseValue","nameValueOptions","emailValueOptions","passwordValueOptions","items","Math","floor","random","length","numberOfFormElements","process","env","RAILS_ENV","targets"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,SAASA,UAAT,QAA2B,UAA3B;;;;;;;;;;;;;;;8BAKY;AACR,UAAI,KAAKC,kBAAL,MAA6B,KAAKC,cAAL,EAAjC,EAAwD;AACtD,aAAKC,YAAL;AACD;AACF;;;mCAEc;AACb,WAAKC,OAAL,CAAaC,kBAAb,CAAgC,WAAhC,EACE,KAAKC,SAAL,EADF;AAGD;;;kCAEa;AACZ,UAAI,KAAKL,kBAAL,MAA6B,CAAjC,EAAoC;AAClC,aAAKM,QAAL;AACD,OAFD,MAEO;AACL,aAAKC,YAAL,CAAkBC,IAAlB,GAAyB,8BAAzB;AACD;AACF;;;8CAEyBC,C,EAAG;AAC3B,UAAIA,CAAC,CAACC,GAAF,KAAU,GAAd,EAAmB;AACjB,aAAKC,WAAL;AACD;AACF;;;gCAEW;AACV;AASD;;;+BAEU;AAAA;;AACT,UAAMC,KAAK,GAAGC,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,CAAd;AAEA,SAAGC,OAAH,CAAWC,IAAX,CAAgBJ,KAAhB,EAAuB,UAACK,IAAD,EAAU;AAC/B,YAAMC,MAAM,GAAGD,IAAI,CAACH,oBAAL,CAA0B,OAA1B,CAAf;;AAEA,QAAA,KAAI,CAACK,aAAL,CAAmBF,IAAnB;AACD,OAJD;AAKD;;;kCAEaA,I,EAAM;AAAA;;AAClB,UAAMC,MAAM,GAAGD,IAAI,CAACH,oBAAL,CAA0B,OAA1B,CAAf;AAEA,SAAGC,OAAH,CAAWC,IAAX,CAAgBE,MAAhB,EAAwB,UAACE,KAAD,EAAW;AACjC,YAAIC,KAAK,GAAO,gBAAhB;AACA,YAAIC,SAAS,GAAGF,KAAK,CAACG,IAAN,CAAWC,OAAX,CAAmBH,KAAnB,EAA0B,EAA1B,CAAhB;;AAEA,gBAAQC,SAAR;AACE,eAAK,MAAL;AACEF,YAAAA,KAAK,CAACK,KAAN,GAAc,MAAI,CAACC,cAAL,CAAoB,MAAI,CAACC,gBAAL,EAApB,CAAd;AACF;;AACA,eAAK,OAAL;AACEP,YAAAA,KAAK,CAACK,KAAN,GAAc,MAAI,CAACC,cAAL,CAAoB,MAAI,CAACE,iBAAL,EAApB,CAAd;AACF;;AACA,eAAK,UAAL;AACER,YAAAA,KAAK,CAACK,KAAN,GAAc,MAAI,CAACC,cAAL,CAAoB,MAAI,CAACG,oBAAL,EAApB,CAAd;AACF;AATF;AAWD,OAfD;AAgBD;;;uCAEkB;AACjB,aAAO,CACL,OADK,EACI,MADJ,EACY,SADZ,CAAP;AAGD;;;wCAEmB;AAClB,aAAO,CACL,kBADK,CAAP;AAGD;;;2CAEsB;AACrB,aAAO,CACL,MADK,CAAP;AAGD;;;mCAEcC,K,EAAO;AACpB,aAAOA,KAAK,CAACC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBH,KAAK,CAACI,MAAjC,CAAD,CAAZ;AACD;;;yCAEoB;AACnB,aAAO,KAAKC,oBAAL,KAA8B,CAArC;AACD;;;2CAEsB;AACrB,aAAOtB,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,EAAsCoB,MAA7C;AACD;;;qCAEgB;AACf,aAAOE,OAAO,CAACC,GAAR,CAAYC,SAAZ,KAA0B,aAAjC;AACD;;;;EAxG0BvC,U;;SACpBwC,O,GAAU,CAAE,QAAF,C","sourcesContent":["import { Controller } from \"stimulus\"\n\nexport default class extends Controller {\n  static targets = [ \"button\" ]\n\n  connect() {\n    if (this.formElementsOnPage() && this.devEnvironment()) {\n      this.addComponent()\n    }\n  }\n\n  addComponent() {\n    this.element.insertAdjacentHTML('beforeend',\n      this.buttonTag()\n    )\n  }\n\n  analysePage() {\n    if (this.formElementsOnPage() == 1) {\n      this.fillForm()\n    } else {\n      this.buttonTarget.text = 'Too many forms on this page…'\n    }\n  }\n\n  analysePageWithKeybinding(e) {\n    if (e.key === 'f') {\n      this.analysePage()\n    }\n  }\n\n  buttonTag() {\n    return `\n      <button\n        class=\"fixed bottom-0 right-0 mb-4 mr-4 p-2 bg-gray-900 text-gray-100 rounded shadow-lg\"\n        data-target=\"sjabloon--fill-form.button\"\n        data-action=\"click->sjabloon--fill-form#analysePage keydown@window->sjabloon--fill-form#analysePageWithKeybinding\"\n        >\n        Fill form\n      </button>\n    `\n  }\n\n  fillForm() {\n    const forms = document.getElementsByTagName('form');\n\n    [].forEach.call(forms, (form) => {\n      const inputs = form.getElementsByTagName('input')\n\n      this.fillInputsFor(form)\n    })\n  }\n\n  fillInputsFor(form) {\n    const inputs = form.getElementsByTagName('input');\n\n    [].forEach.call(inputs, (input) => {\n      let regex     = /(^.*\\[|\\].*$)/g;\n      let inputName = input.name.replace(regex, '');\n\n      switch (inputName) {\n        case 'name':\n          input.value = this.randomiseValue(this.nameValueOptions())\n        break;\n        case 'email':\n          input.value = this.randomiseValue(this.emailValueOptions())\n        break;\n        case 'password':\n          input.value = this.randomiseValue(this.passwordValueOptions())\n        break;\n      }\n    })\n  }\n\n  nameValueOptions() {\n    return [\n      'Eelco', 'Kate', 'Cameron'\n    ]\n  }\n\n  emailValueOptions() {\n    return [\n      'test@example.com'\n    ]\n  }\n\n  passwordValueOptions() {\n    return [\n      '1234'\n    ]\n  }\n\n  randomiseValue(items) {\n    return items[Math.floor(Math.random() * items.length)]\n  }\n\n  formElementsOnPage() {\n    return this.numberOfFormElements() > 0\n  }\n\n  numberOfFormElements() {\n    return document.getElementsByTagName('form').length\n  }\n\n  devEnvironment() {\n    return process.env.RAILS_ENV === 'development'\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}